import{u as d,r as c,s as p,j as e,f as x,a as l,B as u}from"./index-s1Im0gGd.js";import{p as h}from"./stripe-config-JhD1Bie7.js";import{P as f}from"./package-D_gg4fgx.js";import{A as g}from"./arrow-right-DZHp8NrD.js";function b(){const{user:t}=d(),[r,a]=c.useState(null),[m,i]=c.useState(!0);c.useEffect(()=>{if(!t){a(null),i(!1);return}n()},[t]);const n=async()=>{try{const{data:s,error:o}=await p.from("stripe_user_subscriptions").select("*").maybeSingle();o?(console.error("Error fetching subscription:",o),a(null)):a(s)}catch(s){console.error("Error fetching subscription:",s),a(null)}finally{i(!1)}};return{subscription:r,loading:m,activeProduct:r!=null&&r.price_id&&h.find(s=>s.priceId===r.price_id)||null,refetch:n}}function P(){const{refetch:t}=b();return c.useEffect(()=>{const r=setTimeout(()=>{t()},2e3);return()=>clearTimeout(r)},[t]),e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(x,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 mb-4",children:"Paiement réussi !"}),e.jsx("p",{className:"text-neutral-600 mb-8",children:"Votre achat a été traité avec succès. Vous pouvez maintenant profiter de tous les avantages de votre pack."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{to:"/dashboard",children:e.jsxs(u,{className:"w-full flex items-center justify-center bg-primary hover:bg-primary/90 text-white",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Aller au tableau de bord",e.jsx(g,{className:"w-4 h-4 ml-2"})]})}),e.jsx(l,{to:"/pricing",children:e.jsx(u,{variant:"outline",className:"w-full border-primary text-primary hover:bg-primary/10",children:"Voir les autres packs"})})]}),e.jsx("div",{className:"mt-8 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-sm text-primary",children:[e.jsx("strong",{children:"Prochaines étapes :"})," Consultez votre tableau de bord pour commencer à utiliser vos tokens et créer votre première annonce d'envoi."]})})]})})})}export{P as SuccessPage};
