import{g as u,r as t,j as e,L as p,U as j,a as f,B as g,M as v,s as N}from"./index-s1Im0gGd.js";import{S as b}from"./server-crash-DZrP2UOO.js";import{M as w}from"./map-pin-CGMQsRrg.js";import{C as d}from"./calendar-8PhAnDAA.js";import{W as y}from"./weight-h7E0NLn2.js";import{D as _}from"./dollar-sign-CLdPlu9-.js";function T(){const{id:a}=u(),[s,m]=t.useState(null),[o,l]=t.useState(!0),[i,h]=t.useState(null);t.useEffect(()=>{(async()=>{if(a)try{l(!0);const{data:r,error:x}=await N.from("trips").select("*, traveler:users!traveler_id(first_name, last_name, profile_picture)").eq("id",a).single();if(x)throw x;if(!r)throw new Error("Trajet non trouvé");m(r)}catch(r){h("Impossible de charger les détails du trajet."),console.error(r)}finally{l(!1)}})()},[a]);const n=c=>new Date(c).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return o?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(p,{className:"w-12 h-12 text-primary animate-spin"})}):i?e.jsxs("div",{className:"min-h-screen bg-neutral-50 py-12 px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx(b,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-red-700",children:"Une erreur est survenue"}),e.jsx("p",{className:"text-red-600 mt-2",children:i})]}):s?e.jsx("div",{className:"min-h-screen bg-neutral-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-4xl shadow-xl p-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-neutral-800",children:s.title}),e.jsxs("p",{className:"text-neutral-500 mt-2",children:["Publié le ",new Date(s.created_at).toLocaleDateString("fr-FR")]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"Description"}),e.jsx("p",{className:"text-neutral-600 leading-relaxed",children:s.description||"Aucune description fournie."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Itinéraire et dates"}),e.jsxs("div",{className:"space-y-3 text-neutral-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2 text-accent"})," De ",e.jsx("strong",{children:s.departure_city})," à ",e.jsx("strong",{children:s.arrival_city})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2 text-accent"})," Départ le ",e.jsx("strong",{children:n(s.departure_date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2 text-accent"})," Arrivée le ",e.jsx("strong",{children:n(s.arrival_date)})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"Capacité et prix"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-neutral-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-accent"})," Poids disponible: ",e.jsxs("strong",{children:[s.available_weight," kg"]})]}),s.price_per_kg&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2 text-accent"})," Prix: ",e.jsxs("strong",{children:[s.price_per_kg.toLocaleString()," ",s.currency,"/kg"]})]})]})]})]}),e.jsx("div",{className:"md:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Voyageur"}),s.traveler&&s.traveler.profile_picture?e.jsx("img",{src:s.traveler.profile_picture,alt:"Voyageur",className:"w-20 h-20 rounded-full mx-auto mb-3"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-neutral-200 flex items-center justify-center mx-auto mb-3",children:e.jsx(j,{className:"w-10 h-10 text-neutral-500"})}),e.jsx(f,{to:`/users/${s.traveler_id}`,className:"font-bold text-neutral-900 hover:text-accent transition-colors",children:s.traveler?`${s.traveler.first_name} ${s.traveler.last_name}`:"Utilisateur inconnu"}),e.jsxs(g,{className:"w-full mt-6 bg-primary hover:bg-primary/90 text-white",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Contacter le voyageur"]})]})})]})]})})}):e.jsx("div",{className:"text-center py-20",children:"Trajet non trouvé."})}export{T as TripDetailsPage};
