import{r as s,j as e,B as f,L as b,s as N}from"./index-s1Im0gGd.js";import{S as y}from"./ShipmentCard--3z7VJzP.js";import{I as u}from"./Input-BKp795_O.js";import{S}from"./search-DZtwayj2.js";import{S as w}from"./server-crash-DZrP2UOO.js";import"./map-pin-CGMQsRrg.js";import"./calendar-8PhAnDAA.js";import"./dollar-sign-CLdPlu9-.js";import"./package-D_gg4fgx.js";function L(){const[a,h]=s.useState(""),[l,p]=s.useState(""),[i,g]=s.useState([]),[t,d]=s.useState(!1),[n,c]=s.useState(""),[v,j]=s.useState(!1),o=async()=>{if(!a.trim()&&!l.trim()){c("Veuillez saisir au moins une ville de dÃ©part ou d'arrivÃ©e.");return}d(!0),c(""),j(!0);try{const{data:r,error:x}=await N.rpc("search_shipments",{origin_query:a.trim()||null,destination_query:l.trim()||null});if(x)throw x;g(r||[])}catch(r){c("Erreur lors de la recherche des colis."),console.error("Search error:",r)}finally{d(!1)}},m=r=>{r.key==="Enter"&&(r.preventDefault(),o())};return e.jsx("div",{className:"min-h-screen bg-neutral-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-neutral-800 mb-4",children:"Rechercher un colis"}),e.jsx("p",{className:"text-xl text-neutral-600 max-w-3xl mx-auto",children:"Trouvez des colis correspondant Ã  votre itinÃ©raire en saisissant les villes de dÃ©part et d'arrivÃ©e."})]}),e.jsx("div",{className:"bg-white rounded-4xl shadow-lg p-8 mb-12 max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:r=>{r.preventDefault(),o()},className:"grid sm:grid-cols-3 gap-4 items-end",children:[e.jsx(u,{label:"Ville de dÃ©part",value:a,onChange:r=>h(r.target.value),onKeyPress:m,placeholder:"Ex: Dakar"}),e.jsx(u,{label:"Ville d'arrivÃ©e",value:l,onChange:r=>p(r.target.value),onKeyPress:m,placeholder:"Ex: Abidjan"}),e.jsxs(f,{type:"submit",onClick:o,loading:t,className:"w-full h-12 text-base bg-primary hover:bg-primary/90 text-white",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Rechercher"]})]})}),t&&e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(b,{className:"w-12 h-12 text-primary animate-spin"})}),n&&e.jsxs("div",{className:"text-center py-20 bg-red-50 rounded-2xl",children:[e.jsx(w,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-red-700",children:"Oops! Une erreur est survenue."}),e.jsx("p",{className:"text-red-600 mt-2",children:n})]}),!t&&v&&i.length===0&&!n&&e.jsxs("div",{className:"text-center py-20 bg-neutral-100 rounded-2xl",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ“¦"}),e.jsx("h3",{className:"text-xl font-semibold text-neutral-700",children:"Aucun colis trouvÃ©"}),e.jsx("p",{className:"text-neutral-500 mt-2",children:"Aucun colis ne correspond Ã  votre recherche. Essayez d'Ã©largir vos critÃ¨res."})]}),!t&&i.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:i.map(r=>e.jsx(y,{shipment:r},r.id))})]})})}export{L as SearchPage};
