import{r as t,u as P,j as e,B as f,a as U}from"./index-s1Im0gGd.js";import{I as o}from"./Input-BKp795_O.js";import{A as h}from"./Alert-DQovq92X.js";import{G as _}from"./GoogleIcon-DygHH-8C.js";function A(){const[m,v]=t.useState(""),[n,j]=t.useState(""),[u,N]=t.useState(""),[i,w]=t.useState(""),[c,y]=t.useState(""),[b,a]=t.useState(!1),[S,d]=t.useState(!1),[p,r]=t.useState(""),[C,L]=t.useState(!1),{signUp:q,signInWithGoogle:G}=P(),E=async s=>{var x;if(s.preventDefault(),a(!0),r(""),!i.trim()||!c.trim()){r("Le prénom et le nom sont requis"),a(!1);return}if(n!==u){r("Les mots de passe ne correspondent pas"),a(!1);return}if(n.length<6){r("Le mot de passe doit contenir au moins 6 caractères"),a(!1);return}try{const{data:l,error:g}=await q({email:m,password:n,options:{emailRedirectTo:`${window.location.origin}/login`,data:{first_name:i,last_name:c}}});g?r(g.message):(x=l==null?void 0:l.user)!=null&&x.email_confirmed_at?window.location.href="/complete-profile":L(!0)}catch(l){r(l.message||"Une erreur est survenue lors de la création du compte")}finally{a(!1)}},I=async()=>{d(!0),r("");const{error:s}=await G();s&&(r(s.message),d(!1))};return C?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx(h,{type:"success",title:"Compte créé avec succès !",message:"Veuillez consulter votre boîte de réception pour confirmer votre adresse e-mail."}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Une fois confirmé, vous serez redirigé vers la complétion de votre profil."})})]})}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Créer un compte"}),p&&e.jsx("div",{className:"mb-4",children:e.jsx(h,{type:"error",message:p})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{label:"Prénom",type:"text",value:i,onChange:s=>w(s.target.value),required:!0,placeholder:"Votre prénom"}),e.jsx(o,{label:"Nom",type:"text",value:c,onChange:s=>y(s.target.value),required:!0,placeholder:"Votre nom"})]}),e.jsx(o,{label:"Email",type:"email",value:m,onChange:s=>v(s.target.value),required:!0,placeholder:"votre@email.com"}),e.jsx(o,{label:"Mot de passe",type:"password",value:n,onChange:s=>j(s.target.value),required:!0,placeholder:"••••••••"}),e.jsx(o,{label:"Confirmer le mot de passe",type:"password",value:u,onChange:s=>N(s.target.value),required:!0,placeholder:"••••••••"}),e.jsx(f,{type:"submit",loading:b,className:"w-full bg-primary hover:bg-primary/90 text-white",children:"Créer un compte"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-neutral-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-neutral-500",children:"OU"})})]}),e.jsx("div",{children:e.jsxs(f,{variant:"outline",className:"w-full flex items-center justify-center",onClick:I,loading:S,children:[e.jsx(_,{className:"mr-2"}),"Continuer avec Google"]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-neutral-600",children:["Déjà un compte ?"," ",e.jsx(U,{to:"/login",className:"text-primary hover:text-primary/90 font-medium",children:"Se connecter"})]})})]})})}function D(){return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(A,{})})}export{D as SignupPage};
