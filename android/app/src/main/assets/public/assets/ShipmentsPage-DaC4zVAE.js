import{c as j,u as f,r as a,s as b,j as e,a as l,B as s}from"./index-s1Im0gGd.js";import{P as o}from"./plus-D0Ef-JQS.js";import{P as m}from"./package-D_gg4fgx.js";import{M as v}from"./map-pin-CGMQsRrg.js";import{D as y}from"./dollar-sign-CLdPlu9-.js";import{C as w}from"./calendar-8PhAnDAA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=j("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function I(){const{user:t}=f(),[n,u]=a.useState([]),[h,i]=a.useState(!0),[c,d]=a.useState("");a.useEffect(()=>{t&&p()},[t]);const p=async()=>{if(t)try{i(!0),d("");const{data:r,error:x}=await b.from("shipments").select("*").eq("sender_id",t.id).order("created_at",{ascending:!1});if(x)throw x;u(r||[])}catch(r){d("Erreur lors du chargement des envois"),console.error("Error fetching shipments:",r)}finally{i(!1)}},N=r=>{switch(r){case"PENDING_MATCH":return"bg-yellow-100 text-yellow-800";case"MATCHED":return"bg-blue-100 text-blue-800";case"IN_TRANSIT":return"bg-purple-100 text-purple-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELED":return"bg-red-100 text-red-800";default:return"bg-neutral-100 text-neutral-800"}},g=r=>{switch(r){case"PENDING_MATCH":return"En attente";case"MATCHED":return"Correspondance trouvée";case"IN_TRANSIT":return"En transit";case"DELIVERED":return"Livré";case"CANCELED":return"Annulé";default:return r}};return h?e.jsx("div",{className:"min-h-screen bg-neutral-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):e.jsx("div",{className:"min-h-screen bg-neutral-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Mes envois"}),e.jsx("p",{className:"text-neutral-600 mt-2",children:"Gérez et suivez tous vos colis"})]}),e.jsx(l,{to:"/create-shipment",children:e.jsxs(s,{className:"flex items-center bg-primary hover:bg-primary/90 text-white",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Nouveau colis"]})})]}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:c}),n.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-neutral-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Aucun envoi pour le moment"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Créez votre première annonce de colis pour commencer"}),e.jsx(l,{to:"/create-shipment",children:e.jsxs(s,{className:"bg-primary hover:bg-primary/90 text-white",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Créer une annonce"]})})]}):e.jsx("div",{className:"grid gap-6",children:n.map(r=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:r.title}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(r.status)}`,children:g(r.status)}),r.is_urgent&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Urgent"}),r.is_fragile&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Fragile"})]}),r.description&&e.jsx("p",{className:"text-neutral-600 mb-3",children:r.description})]}),e.jsx(l,{to:`/shipments/${r.id}`,children:e.jsxs(s,{variant:"outline",size:"sm",className:"border-primary text-primary hover:bg-primary/10",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Voir détails"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-neutral-600",children:[e.jsx(v,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.jsxs("span",{children:[r.pickup_city,", ",r.pickup_country," → ",r.delivery_city,", ",r.delivery_country]})]}),e.jsxs("div",{className:"flex items-center text-neutral-600",children:[e.jsx(m,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.jsxs("span",{children:[r.weight," kg"]})]}),e.jsxs("div",{className:"flex items-center text-neutral-600",children:[e.jsx(y,{className:"w-4 h-4 mr-2 text-neutral-400"}),e.jsxs("span",{children:[r.proposed_price!=null?r.proposed_price.toLocaleString():"N/A"," ",r.currency]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-neutral-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Créé le ",new Date(r.created_at).toLocaleDateString("fr-FR")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{variant:"outline",size:"sm",className:"border-primary text-primary hover:bg-primary/10",children:"Modifier"}),r.status==="PENDING_MATCH"&&e.jsx(s,{variant:"outline",size:"sm",className:"border-red-600 text-red-600 hover:bg-red-50",children:"Annuler"})]})]})})]},r.id))})]})})}export{I as ShipmentsPage};
